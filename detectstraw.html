<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Fruit Detection</title>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script>
        function myFunction() {
            var x = document.getElementById("mobilenav");
            if (x.className === "nav") {
                x.className += " responsive";
            } else {
                x.className = "nav";
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            const dropZone = document.getElementById("drop-zone");
            const fileInput = document.getElementById("files");
            const gallery = document.getElementById("gallery");
            const maxRows = 2; // Maximum number of rows to display

            dropZone.addEventListener("dragover", (e) => {
                e.preventDefault();
                dropZone.classList.add("highlight");
            });

            dropZone.addEventListener("dragleave", () => {
                dropZone.classList.remove("highlight");
            });

            dropZone.addEventListener("drop", (e) => {
                e.preventDefault();
                dropZone.classList.remove("highlight");
                const files = e.dataTransfer.files;
                fileInput.files = files;
                updateGallery(files);
            });

            fileInput.addEventListener("change", (e) => {
                updateGallery(fileInput.files);
            });

            function updateGallery(files) {
                gallery.innerHTML = "";
                const numCols = 5; // Number of columns to display
                const numRows = Math.min(maxRows, Math.ceil(files.length / numCols));
                const thumbnailSize = 150; // Adjust this value as needed
                gallery.style.height = `${numRows * thumbnailSize}px`;

                for (const file of files) {
                    const imgContainer = document.createElement("div");
                    imgContainer.classList.add("image-container");
                    const img = document.createElement("img");
                    img.src = URL.createObjectURL(file);
                    imgContainer.appendChild(img);
                    gallery.appendChild(imgContainer);
                }
            }
        });
    </script>
    <style>
        body {
          background-image: url('images/straw.jpg');
          background-size: cover;
        }
    </style>
</head>

<body>
    <header>
        <h1>Rotten Fruit Detection</h1>
        <div class="nav" id="mobilenav">
            <a href="home.html">Home</a>
            <!--<a href="detector.html" class="active">Detector</a>-->
            <div class="dropdown">
                <button class="dropbtn">Detector
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content" class="active">
                    <a href="detectstraw.html">Strawberry</a>
                    <a href="detectpea.html">Peach</a>
                    <a href="detectpom.html">Pomegranate</a>
                </div>
            </div>
            <a href="about.html">About Us</a>
            <a href="javascript:void(0);" class="icon" onclick="myFunction()">
                <i class="fa fa-bars"></i>
            </a>
        </div>
    </header>

    <div class="container">
        <div class="content">
            <h2>Detection Content</h2>
            <h2><center>Strawberry</center></h2>
            <br>
                <p><font color="black"><center>Please fill out the following fields to create a new model. Based off your input a configuration file will be generate, which can then be ran on the lattest <br />verson of the Cell Viewer application. If you do not have the latest version of the modeling software, please <a href="#">click here.</a> </center></font></p>
                <br>
                <center>
                <br>
            
                <!-- DATA FEILDS -->
                <form method="post" action="" id="form-id" enctype="multipart/form-data">
                    <label for="ModelName">Model Name:</label><br>
                    <input type="text" id="ModelName" name="ModelName"><br><br><br>  
                    <input type="hidden" id="ImgLink" name="ImgLink">
                         
                <!-- Drag and Drop Form -->
                <div id="drop-zone">
                    <form action="" class="my-form" method="POST" enctype="multipart/form-data">
                    <center>
                        <p>Drag and Drop or Select Files to Upload</p><br>
                        <input type="file" id="files" name="files[]" accept=".jpg, .jpeg, .png, .gif" multiple="multiple" max_file_uploads="100"><br>
                        <div id="gallery"></div><br>
                    </center>
                </div>
                             
                <!-- Add this input field to the form
                <label for="runAnalysis">Run Analysis</label>
                <input type="checkbox" name="runAnalysis" id="runAnalysis">
                <br><br>
               
                Show the file upload option only if "Run Analysis" is selected
                <div id="uploadOption" style="display:none;">
                    <label for="txtFile">Upload cell location Data:</label><br>
                    <input type="file" id="txtFile" name="txtFile" accept=".txt"><br><br>
                </div>
               
                <script>
                    // JavaScript to toggle the display of the upload option based on the checkbox state
                    document.getElementById('runAnalysis').addEventListener('change', function() {
                        document.getElementById('uploadOption').style.display = this.checked ? 'block' : 'none';
                    });
                </script>-->
                <br><br>
                       
                <button type="submit" name="submit" id="submit-btn" class="button" style="font-family: 'Times New Roman',Times, serif;">Create Model</button></center>
                </form>
                </form> 
                <br><br><br>
                </center>
            <p></p>
        </div>
    </div>

    <footer>
        <p>&copy RottenFruitDetection</p>
    </footer>
</body>
</html>
